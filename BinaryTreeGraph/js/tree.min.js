Ext.define("MJ.BinaryTreeInfo",{getRoot:function(){},getLeft:function(a){},getRight:function(a){},getString:function(a){}});Ext.define("MJ.BinaryTree",{config:{size:0,root:null,elements:null},constructor:function(a){this.initConfig(a)},add:function(b,f,e){if(!b){return}var c=null;if(!this.root){c=this.root=new MJ.BinaryTree.Node({element:b});this.size=1}else{c=this._node(b)}if(!c){return}if(f){var d=c.left;c.left=new MJ.BinaryTree.Node({element:f,parent:c});if(!d){this.size++}else{c.left.left=d.left;c.left.right=d.right}}if(e){var a=c.right;c.right=new MJ.BinaryTree.Node({element:e,parent:c});if(!a){this.size++}else{c.right.left=a.left;c.right.right=a.right}}},_node:function(b){if(!b||!this.root){return null}var a=[];a.push(this.root);while(a.length>0){var c=a.shift();if(MJ.Comparator.compare(c.element,b)===0){return c}if(c.left){a.push(c.left)}if(c.right){a.push(c.right)}}},remove:function(a){var d=this._node(a);if(!d){return}this.size--;if(d.left&&d.right){var c=this.successor(d);d.element=c.element;d=c}var b=d.left?d.left:d.right;if(b){b.parent=d.parent;if(!d.parent){this.root=b}else{if(d.parent.left===d){d.parent.left=b}else{d.parent.right=b}}this.afterRemove_(d,b);d.left=d.right=d.parent=null}else{if(!d.parent){this.root=null;this.afterRemove_(d)}else{if(d===d.parent.left){d.parent.left=null}else{d.parent.right=null}this.afterRemove_(d);d.parent=null}}},afterRemove_:function(b,a){},createNode:function(a,b){return new MJ.BinaryTree.Node({element:a,parent:b})},preorderElements:function(){if(this.size===0){return null}var a=[];this._preorderElements(this.root,a);return a},_preorderElements:function(b,a){if(!b){return}a.push(b.element);this._preorderElements(b.left,a);this._preorderElements(b.right,a)},inorderElements:function(){if(this.size===0){return null}var a=[];this._inorderElements(this.root,a);return a},_inorderElements:function(b,a){if(!b){return}this._inorderElements(b.left,a);a.push(b.element);this._inorderElements(b.right,a)},postorderElements:function(){if(this.size===0){return null}var a=[];this._postorderElements(this.root,a);return a},_postorderElements:function(b,a){if(!b){return}this._postorderElements(b.left,a);this._postorderElements(b.right,a);a.push(b.element)},levelOrderElements:function(){if(this.size===0){return null}var b=[];var a=[];a.push(this.root);while(a.length>0){var c=a.shift();b.push(c.element);if(c.left){a.push(c.left)}if(c.right){a.push(c.right)}}return b},getLeft:function(a){return a.left},getRight:function(a){return a.right},getString:function(a){return a.toString()},clear:function(){this.size=0;this.elements=null;this.root=null},predecessor:function(a){if(!a){return null}if(a.left){var b=a.left;while(b.right){b=b.right}return b}while(a.parent&&a===a.parent.left){a=a.parent}return a.parent},successor:function(b){if(!b){return null}if(b.right){var a=b.right;while(a.left){a=a.left}return a}while(b.parent&&b===b.parent.right){b=b.parent}return b.parent}});Ext.define("MJ.BinaryTree.Node",{config:{left:null,right:null,parent:null,element:null,height:1},constructor:function(a){this.initConfig(a)},toString:function(){return this.element.toString()},isLeaf:function(){return !this.left&&!this.right},hasTwoChildren:function(){return this.left&&this.right},isLeftChild:function(){return this.parent&&this===this.parent.left},isRightChild:function(){return this.parent&&this===this.parent.right},tallerChild:function(){var a=this.left?this.left.height:0;var b=this.right?this.right.height:0;if(a>b){return this.left}if(b>a){return this.right}return this.isLeftChild()?this.left:this.right}});Ext.define("MJ.BinarySearchTree",{extend:"MJ.BinaryTree",config:{comparator:null},constructor:function(a){this.callParent(arguments);this.initConfig(a)},setElements:function(b){if(!Ext.isArray(b)){return}for(var a in b){this.add(b[a])}this.elements=b},_compare:function(b,a){if(this.comparator){return this.comparator.compare(b,a)}return MJ.Comparator.compare(b,a)},add:function(b){if(!b){return}if(!this.root){this.root=this.createNode(b);this.size++;return}var c=this.root;var e=this.root;var d=0;while(e!==null){d=this._compare(b,e.element);c=e;if(d>0){e=e.right}else{if(d<0){e=e.left}else{e.element=b;return}}}var a=this.createNode(b,c);if(d>0){c.right=a}else{c.left=a}this.size++;this.afterAdd_(a)},afterAdd_:function(a){},_node:function(a){if(!a){return null}var c=this.root;while(c){var b=this._compare(a,c.element);if(b===0){return c}if(b>0){c=c.right}else{c=c.left}}return c}});Ext.define("MJ.AVLTree",{extend:"MJ.BinarySearchTree",constructor:function(a){this.initConfig(a);this.callParent(arguments)},createNode:function(a,b){return new MJ.AVLTree.Node({element:a,parent:b})},afterAdd_:function(a){this.callParent(arguments);a=a.parent;while(a){if(a.isBalanced()){a.updateHeight()}else{this.rebalance(a);break}a=a.parent}},afterRemove_:function(b,a){this.callParent(arguments);b=b.parent;while(b){if(b.isBalanced()){b.updateHeight()}else{this.rebalance(b)}b=b.parent}},afterRotate:function(a,b,d){if(a.isLeftChild()){a.parent.left=b}else{if(a.isRightChild()){a.parent.right=b}else{this.root=b}}if(d){d.parent=a}b.parent=a.parent;a.parent=b;a.updateHeight();b.updateHeight()},leftRotate:function(a){var b=a.right;var d=b.left;a.right=d;b.left=a;this.afterRotate(a,b,d)},rightRotate:function(a){var b=a.left;var d=b.right;a.left=d;b.right=a;this.afterRotate(a,b,d)},rebalance:function(a){p=a.tallerChild();n=p.tallerChild();if(p.isLeftChild()){if(n.isLeftChild()){this.rightRotate(a)}else{this.leftRotate(p);this.rightRotate(a)}}else{if(n.isLeftChild()){this.rightRotate(p);this.leftRotate(a)}else{this.leftRotate(a)}}}});Ext.define("MJ.AVLTree.Node",{extend:"MJ.BinaryTree.Node",constructor:function(a){this.callParent(arguments);this.initConfig(a)},isBalanced:function(){return Math.abs(this.balanceFactor())<=1},balanceFactor:function(){var a=this.left?this.left.height:0;var b=this.right?this.right.height:0;return a-b},updateHeight:function(){var a=this.left?this.left.height:0;var b=this.right?this.right.height:0;this.height=1+Math.max(a,b)}});